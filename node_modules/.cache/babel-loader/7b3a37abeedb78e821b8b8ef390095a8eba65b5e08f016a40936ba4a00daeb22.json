{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\NIKHIL RAJPUT\\\\Desktop\\\\Mern chat app\\\\Chat-Karoo\\\\src\\\\pages\\\\Register.jsx\",\n  _s = $RefreshSig$();\nimport { React, useState } from 'react';\n//import Login from \"./Login\"\nimport Add from \"../img/add2.png\";\nimport { createUserWithEmailAndPassword, updateProfile } from \"firebase/auth\";\nimport { auth, storage, db } from '../firebase';\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { doc, setDoc } from \"firebase/firestore\";\nimport { useNavigate, Link } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Register = () => {\n  _s();\n  const [error, seterror] = useState(false);\n  const navigate = useNavigate();\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const displayName = event.target[0].value;\n    const email = event.target[1].value;\n    const password = event.target[2].value;\n    const file = event.target[3].files[0];\n    try {\n      const res = await createUserWithEmailAndPassword(auth, email, password);\n      const storageRef = ref(storage, displayName);\n      const uploadTask = uploadBytesResumable(storageRef, file);\n      uploadTask.on(error => {\n        seterror(true);\n      }, () => {\n        getDownloadURL(uploadTask.snapshot.ref).then(async downloadURL => {\n          await updateProfile(res.user, {\n            displayName,\n            photoURL: downloadURL\n          });\n          await setDoc(doc(db, \"users\", res.user.uid), {\n            displayName,\n            uid: res.user.uid,\n            email,\n            photoURL: downloadURL\n          });\n          await setDoc(doc(db, \"usersChat\", res.user.uid), {});\n\n          /*Collecting all the usersChat in the box rightnow it is Empty {} because we dont have any \n            Conversation right now */\n\n          /*when we click the user we need to go to Home page , hence we are using Router - dom  */\n          navigate('/');\n        });\n      });\n    } catch (error) {\n      seterror(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"formContainer\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"formWrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"titlereg\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 8\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Display name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          placeholder: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          style: {\n            display: \"none\"\n          },\n          type: \"file\",\n          id: \"file\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"file\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: Add,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Add Your Profile Photo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), error && /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Something Went Wrong\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 27\n        }, this), \"      \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Do you have an Account ?     \", /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 45\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(Register, \"IP1+F1+zL3inyisDpR4hQMscqEU=\", false, function () {\n  return [useNavigate];\n});\n_c = Register;\nexport default Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","useState","Add","createUserWithEmailAndPassword","updateProfile","auth","storage","db","ref","uploadBytesResumable","getDownloadURL","doc","setDoc","useNavigate","Link","jsxDEV","_jsxDEV","Register","_s","error","seterror","navigate","handleSubmit","event","preventDefault","displayName","target","value","email","password","file","files","res","storageRef","uploadTask","on","snapshot","then","downloadURL","user","photoURL","uid","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","style","display","id","htmlFor","src","alt","to","_c","$RefreshReg$"],"sources":["C:/Users/NIKHIL RAJPUT/Desktop/Mern chat app/Chat-Karoo/src/pages/Register.jsx"],"sourcesContent":["import {React,useState} from 'react'\n//import Login from \"./Login\"\nimport Add from \"../img/add2.png\"\nimport { createUserWithEmailAndPassword ,updateProfile} from \"firebase/auth\";\nimport { auth,storage,db } from '../firebase';\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { doc, setDoc } from \"firebase/firestore\"; \nimport { useNavigate,Link } from 'react-router-dom';\n\n\n\n const Register = () => {\n  const [error, seterror] = useState(false);\n\n  const navigate = useNavigate();\n  \n\n  const handleSubmit =async (event) =>{\n    event.preventDefault()\n    const displayName  = event.target[0].value;\n    const email  = event.target[1].value;\n    const password  = event.target[2].value;\n    const file  = event.target[3].files[0];\n\n     try{\n        const res = await createUserWithEmailAndPassword(auth, email, password)\n        \n\n        const storageRef = ref(storage, displayName);\n\n        const uploadTask = uploadBytesResumable(storageRef, file);\n\n\n\n        uploadTask.on(\n          \n          (error) => {\n             \n             seterror(true)\n          }, \n          () => {\n         \n            getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n              \n                await updateProfile(res.user,{\n                   \n                  displayName ,\n                  photoURL : downloadURL,\n\n                });\n\n                await setDoc(doc(db ,\"users\",res.user.uid),\n                { \n                      displayName,\n                      uid:res.user.uid,\n                      email,\n                      photoURL:downloadURL,\n                });\n\n                await setDoc(doc(db,\"usersChat\",res.user.uid), {} )   \n\n              /*Collecting all the usersChat in the box rightnow it is Empty {} because we dont have any \n                Conversation right now */\n\n                /*when we click the user we need to go to Home page , hence we are using Router - dom  */ \n                navigate('/')\n              \n            });\n          }\n        );\n       \n      \n       }catch(error){\n     \n         seterror(true)\n     }\n     \n  };\n\n  return (\n    <div className = \"formContainer\">\n        <div className='formWrapper'>\n       \n       <span className='titlereg'>Register</span>\n\n            <form onSubmit={handleSubmit}>\n                <input type=\"text\" placeholder='Display name' />\n                <input type=\"email\" placeholder='Email' />\n                <input type=\"password\" placeholder='Password' />\n                <input style={{display:\"none\"}} type=\"file\" id =\"file\"  />\n                <label  htmlFor=\"file\">\n                    <img src={Add} alt=\"\" />\n                    <span >Add Your Profile Photo</span>\n                </label> \n                <button>Sign Up</button>\n                {error && <span>Something Went Wrong</span>}      {/* if Error Occured we used this statement to identify it*/ }\n            </form>\n            <p>Do you have an Account ?     <Link to={\"/login\"}>Login</Link></p>\n        </div>\n\n    </div>\n  )\n}\n\nexport default Register"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}