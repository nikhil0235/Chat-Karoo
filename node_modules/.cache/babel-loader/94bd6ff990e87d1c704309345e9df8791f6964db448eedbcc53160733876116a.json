{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/NIKHIL RAJPUT/Desktop/Mern chat app/Chat-Karoo/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/NIKHIL RAJPUT/Desktop/Mern chat app/Chat-Karoo/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/NIKHIL RAJPUT/Desktop/Mern chat app/Chat-Karoo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from'react';//import Login from \"./Login\"\nimport Add from\"../img/add2.png\";import{createUserWithEmailAndPassword,updateProfile}from\"firebase/auth\";import{auth,storage,db}from'../firebase';import{ref,uploadBytesResumable,getDownloadURL}from\"firebase/storage\";import{doc,setDoc}from\"firebase/firestore\";import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _ref;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),error=_useState2[0],seterror=_useState2[1];var navigate=useNavigate();var handleSubmit=function handleSubmit(_x){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){var displayName,email,password,file,res,storageRef,uploadTask;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:event.preventDefault();displayName=event.target[0].value;email=event.target[1].value;password=event.target[2].value;file=event.target[3].files[0];_context2.prev=5;_context2.next=8;return createUserWithEmailAndPassword(auth,email,password);case 8:res=_context2.sent;storageRef=ref(storage,displayName);uploadTask=uploadBytesResumable(storageRef,file);uploadTask.on(function(error){seterror(true);},function(){var _ref2;getDownloadURL(uploadTask.snapshot.ref).then(function(_x2){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(downloadURL){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return updateProfile(res.user,{displayName:displayName,photoURL:downloadURL});case 2:_context.next=4;return setDoc(doc(db,\"users\",res.user.uid),{displayName:displayName,uid:res.user.uid,email:email,photoURL:downloadURL});case 4:_context.next=6;return setDoc(doc(db,\"usersChat\",res.user.uid),{});case 6:/*Collecting all the usersChat in the box rightnow it is Empty {} because we dont have any \n                Conversation right now */ /*when we click the user we need to go to Home page , hence we are using Router - dom  */navigate('/');case 7:case\"end\":return _context.stop();}},_callee);}))).apply(this,arguments);});});_context2.next=17;break;case 14:_context2.prev=14;_context2.t0=_context2[\"catch\"](5);seterror(true);case 17:case\"end\":return _context2.stop();}},_callee2,null,[[5,14]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsx(\"div\",{className:\"formContainer\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formWrapper\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"titlereg\",children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Display name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{style:{display:\"none\"},type:\"file\",id:\"file\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"file\",children:[/*#__PURE__*/_jsx(\"img\",{src:Add,alt:\"\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Add Your Profile Photo\"})]}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign Up\"}),error&&/*#__PURE__*/_jsx(\"span\",{children:\"Something Went Wrong\"}),\"      \"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Do you have an Account ?     \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})});};export default Register;","map":{"version":3,"names":["React","useState","Add","createUserWithEmailAndPassword","updateProfile","auth","storage","db","ref","uploadBytesResumable","getDownloadURL","doc","setDoc","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Register","_ref","_useState","_useState2","_slicedToArray","error","seterror","navigate","handleSubmit","_x","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","event","displayName","email","password","file","res","storageRef","uploadTask","wrap","_callee2$","_context2","prev","next","preventDefault","target","value","files","sent","on","_ref2","snapshot","then","_x2","_callee","downloadURL","_callee$","_context","user","photoURL","uid","stop","apply","arguments","t0","className","children","onSubmit","type","placeholder","style","display","id","htmlFor","src","alt","to"],"sources":["C:/Users/NIKHIL RAJPUT/Desktop/Mern chat app/Chat-Karoo/src/pages/Register.jsx"],"sourcesContent":["import {React,useState} from 'react'\n//import Login from \"./Login\"\nimport Add from \"../img/add2.png\"\nimport { createUserWithEmailAndPassword ,updateProfile} from \"firebase/auth\";\nimport { auth,storage,db } from '../firebase';\nimport { ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { doc, setDoc } from \"firebase/firestore\"; \nimport { useNavigate,Link } from 'react-router-dom';\n\n\n\n const Register = () => {\n  const [error, seterror] = useState(false);\n\n  const navigate = useNavigate();\n  \n\n  const handleSubmit =async (event) =>{\n    event.preventDefault()\n    const displayName  = event.target[0].value;\n    const email  = event.target[1].value;\n    const password  = event.target[2].value;\n    const file  = event.target[3].files[0];\n\n     try{\n        const res = await createUserWithEmailAndPassword(auth, email, password)\n        \n\n        const storageRef = ref(storage, displayName);\n\n        const uploadTask = uploadBytesResumable(storageRef, file);\n\n\n\n        uploadTask.on(\n          \n          (error) => {\n             \n             seterror(true)\n          }, \n          () => {\n         \n            getDownloadURL(uploadTask.snapshot.ref).then(async (downloadURL) => {\n              \n                await updateProfile(res.user,{\n                   \n                  displayName ,\n                  photoURL : downloadURL,\n\n                });\n\n                await setDoc(doc(db ,\"users\",res.user.uid),\n                { \n                      displayName,\n                      uid:res.user.uid,\n                      email,\n                      photoURL:downloadURL,\n                });\n\n                await setDoc(doc(db,\"usersChat\",res.user.uid), {} )   \n\n              /*Collecting all the usersChat in the box rightnow it is Empty {} because we dont have any \n                Conversation right now */\n\n                /*when we click the user we need to go to Home page , hence we are using Router - dom  */ \n                navigate('/')\n              \n            });\n          }\n        );\n       \n      \n       }catch(error){\n     \n         seterror(true)\n     }\n     \n  };\n\n  return (\n    <div className = \"formContainer\">\n        <div className='formWrapper'>\n       \n       <span className='titlereg'>Register</span>\n\n            <form onSubmit={handleSubmit}>\n                <input type=\"text\" placeholder='Display name' />\n                <input type=\"email\" placeholder='Email' />\n                <input type=\"password\" placeholder='Password' />\n                <input style={{display:\"none\"}} type=\"file\" id =\"file\"  />\n                <label  htmlFor=\"file\">\n                    <img src={Add} alt=\"\" />\n                    <span >Add Your Profile Photo</span>\n                </label> \n                <button>Sign Up</button>\n                {error && <span>Something Went Wrong</span>}      {/* if Error Occured we used this statement to identify it*/ }\n            </form>\n            <p>Do you have an Account ?     <Link to={\"/login\"}>Login</Link></p>\n        </div>\n\n    </div>\n  )\n}\n\nexport default Register"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}